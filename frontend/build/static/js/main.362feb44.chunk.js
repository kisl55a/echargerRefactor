(window.webpackJsonptemplate=window.webpackJsonptemplate||[]).push([[0],{1:function(e,t,a){e.exports={map:"Main_map__2A5Ok",mainInfo:"Main_mainInfo__HfHzs",generalGrid:"Main_generalGrid__2Aljb",registration:"Main_registration__9PmD5",gridForMenu:"Main_gridForMenu__t4NZs","post-1":"Main_post-1__20N_-","post-2":"Main_post-2__1L0in","post-3":"Main_post-3__1aiSU",da:"Main_da__192AR",searchRes:"Main_searchRes__uCSW3",searchResTaken:"Main_searchResTaken___mryC",station:"Main_station__Eh8No",stationTaken:"Main_stationTaken__3w6ty",logo:"Main_logo__Nqnmz",buttonGreen:"Main_buttonGreen__2t2go",buttonBlue:"Main_buttonBlue__2ejNs",proceedButton:"Main_proceedButton__3c4Vx",cancelButton:"Main_cancelButton__25PgW",cancelButtonMainPage:"Main_cancelButtonMainPage__doyqb",zebra:"Main_zebra__Yj0hC",infoHeader:"Main_infoHeader__28sSP",stationInfo:"Main_stationInfo__SiEFV",property:"Main_property__Mtkn0",chargingInfo:"Main_chargingInfo__3CoSJ"}},40:function(e,t,a){e.exports=a(89)},45:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(45),a(36)),i=a(4),l=a.n(i),u=a(11),m=a(2),g=a(14),p=a(10),h=a(37),f=a.n(h),d=a(1),E=a.n(d);function b(e){return r.a.createElement("div",null,"fast"===e.type.toLowerCase()?0===e.isTaken?r.a.createElement("img",{className:E.a.station,alt:"fastCharge",src:"/images/Charging.png"}):r.a.createElement("img",{className:E.a.stationTaken,alt:"fastCharge",src:"/images/Charging.png"}):0===e.isTaken?r.a.createElement("img",{className:E.a.station,alt:"slowCharge",src:"/images/slow.png"}):r.a.createElement("img",{className:E.a.stationTaken,alt:"slowCharge",src:"/images/slow.png"}))}var v=a(9),O=a.n(v),k=function(e){return r.a.createElement("div",{className:E.a.stationInfo},r.a.createElement("h4",{className:E.a.infoHeader},e.stationName),r.a.createElement("div",null,"Status: ",1===e.isTaken?"Taken":" Free"),r.a.createElement("div",null,"Address: ",e.address),r.a.createElement("div",null,"Type: ",e.type),r.a.createElement("div",null,"Power: ",e.power," ",r.a.createElement("sup",null,"kWh")),r.a.createElement("div",null,"Price: ",e.price,r.a.createElement("sup",null,e.measure)),e.isLoggedIn?r.a.createElement("div",null,"  Identifier: ",e.UUID):r.a.createElement("div",null),r.a.createElement("div",null," ",r.a.createElement("button",{className:E.a.cancelButtonMainPage,onClick:function(){e.setCurrentStationToNull()}}," Back ")))},_=function(e){function t(){e.setStation(e.info)}return 1!==e.info.isTaken?r.a.createElement("div",{className:E.a.zebra},r.a.createElement("div",{className:E.a.searchRes,onClick:t},e.info.stationName)):r.a.createElement("div",{className:E.a.zebra},r.a.createElement("div",{className:E.a.searchResTaken,onClick:t},e.info.stationName))};function y(e){return r.a.createElement("div",null,e.isCharging?r.a.createElement("div",{className:E.a.chargingInfo},r.a.createElement("h5",{className:E.a.infoHeader}," Station UUID:",e.UUID.toUpperCase()," "),r.a.createElement("div",null,"The price:",e.currentCharge.cost," ",r.a.createElement("sup",null,"EUR")," "),r.a.createElement("div",null," Your time:",e.currentCharge.timeOfUsage," ",r.a.createElement("sup",null,"min")," "),"Your energy:",e.currentCharge.energy," ",r.a.createElement("sup",null,"kWh"),r.a.createElement("br",null),r.a.createElement("button",{className:E.a.cancelButtonMainPage,onClick:e.stopCharging}," Stop charging")):r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.startCharging(t.target.identifier.value)}},r.a.createElement("div",null,"Enter the Identifier"),r.a.createElement("div",null," ",e.noChargerNotification),r.a.createElement("input",{type:"text",name:"identifier"}),r.a.createElement("button",{type:"submit",className:E.a.buttonGreen}," Start charging")))}function j(e){return r.a.createElement("div",{className:E.a.gridForMenu},r.a.createElement("div",{className:E.a.post1},r.a.createElement("img",{className:E.a.logo,alt:"logo",src:"images/logo.png"}),r.a.createElement("br",null),!0!==e.isLoggedIn?r.a.createElement("div",null,r.a.createElement("div",null," ",e.message),r.a.createElement(g.b,{to:"/login"},r.a.createElement("button",{className:E.a.buttonGreen}," Login ")),r.a.createElement(g.b,{to:"/registration"},r.a.createElement("button",{className:E.a.buttonGreen},"Registration"))):r.a.createElement("div",null,r.a.createElement(g.b,{to:"/profile"},r.a.createElement("button",{className:E.a.buttonGreen},"Profile")),r.a.createElement("button",{className:E.a.buttonBlue,onClick:e.logout},"Logout"))),r.a.createElement("div",{id:"mainInfo",className:E.a.post2},r.a.createElement("div",{id:"infoAboutStation"},r.a.createElement("h3",null," Choose station on the map/list or search"),r.a.createElement("input",{type:"search",placeholder:"Search ",onChange:function(t){e.onSearchFilterUpdate(t.target.value)}})," ",r.a.createElement("br",null),e.currentMarker.stationName?r.a.createElement(k,Object.assign({},e.currentMarker,{setCurrentStationToNull:e.setCurrentStationToNull,isLoggedIn:e.isLoggedIn})):0===e.resultArray.length?" No results":e.resultArray.map((function(t,a){return r.a.createElement(_,{key:a,setStation:e.setStation,setCurrentStationToNull:e.setCurrentStationToNull,info:t})}))),r.a.createElement("br",null)),r.a.createElement("div",{className:E.a.post3},e.isLoggedIn?r.a.createElement(y,{startCharging:e.startCharging,noChargerNotification:e.noChargerNotification,isCharging:e.isCharging,idCharging:e.idCharging,UUID:e.UUID,currentCharge:e.currentCharge,stopCharging:e.stopCharging}):"You can start charging when you are logged in"))}function w(e){return r.a.createElement("div",{className:(E.a.generalGrid,E.a.registration)},r.a.createElement("h2",null," Login "),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.login(t.target.name.value,t.target.password.value),e.history.goBack()}},r.a.createElement("div",null,"Nickname"),r.a.createElement("input",{type:"text",name:"name"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("button",{className:E.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack()}},"Cancel"),r.a.createElement("button",{className:E.a.proceedButton,type:"submit"},"Login")))}function C(e){return r.a.createElement("div",{className:(E.a.generalGrid,E.a.registration)},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),t.target.password.value!==t.target.password1.value||(e.register(t.target.username.value,t.target.email.value,t.target.password.value),"Created"===e.message&&e.history.goBack())}},r.a.createElement("h2",null,"Registration"),r.a.createElement("div",null,"Username"),r.a.createElement("input",{type:"text",name:"username"}),r.a.createElement("div",null,"Email"),r.a.createElement("input",{type:"text",name:"email"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("div",null,"Password"),r.a.createElement("input",{type:"password",name:"password1"}),r.a.createElement("br",null),r.a.createElement("button",{className:E.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack(),e.setMessageToNull()}},"Back"),r.a.createElement("button",{className:E.a.proceedButton,type:"submit"},"Register"),r.a.createElement("div",{id:"message"}," ","Incorrect username or password"===e.message?"":e.message," ")))}function N(e){return r.a.createElement("tr",null,r.a.createElement("th",null,e.UUID),r.a.createElement("th",null,e.timeOfStart.substr(0,9)),r.a.createElement("th",null," ",e.energy),r.a.createElement("th",null,e.timeOfUsage," "),r.a.createElement("th",null,e.cost," "))}function S(e){return r.a.createElement("div",null,0!==e.userHistory.length?r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Station Number"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Energy(kWt)"),r.a.createElement("th",null,"Time of usage(min)"),r.a.createElement("th",null,"Cost(EUR)")),r.a.createElement("tbody",null,e.userHistory.map((function(e,t){return r.a.createElement(N,Object.assign({key:t},e))})))):" You have no charges",r.a.createElement("button",{className:E.a.cancelButton,onClick:function(t){t.preventDefault(),e.history.goBack()}},"Back"),r.a.createElement("div",{id:"message",className:E.a.hidden}," ",e.message," "))}function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(e){var t=this,a=Object(n.useState)(!1),c=Object(m.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)([]),h=Object(m.a)(i,2),d=h[0],v=h[1],_=Object(n.useState)(""),y=Object(m.a)(_,2),N=y[0],M=y[1],B=Object(n.useState)([]),x=Object(m.a)(B,2),U=x[0],T=x[1],P=Object(n.useState)(""),D=Object(m.a)(P,2),A=D[0],L=D[1],R=Object(n.useState)(""),z=Object(m.a)(R,2),G=(z[0],z[1]),H=Object(n.useState)([]),F=Object(m.a)(H,2),W=(F[0],F[1],Object(n.useState)(0)),Y=Object(m.a)(W,2),J=(Y[0],Y[1]),q=Object(n.useState)([]),V=Object(m.a)(q,2),X=V[0],K=V[1],Q=Object(n.useState)([]),Z=Object(m.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)({lat:65.01,lng:25.49}),ae=Object(m.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(13),oe=Object(m.a)(ce,2),se=oe[0],ie=oe[1],le=Object(n.useState)([]),ue=Object(m.a)(le,2),me=ue[0],ge=ue[1],pe=Object(n.useState)([]),he=Object(m.a)(pe,2),fe=he[0],de=he[1],Ee=Object(n.useState)(!1),be=Object(m.a)(Ee,2),ve=be[0],Oe=(be[1],Object(n.useState)(!1)),ke=Object(m.a)(Oe,2),_e=ke[0],ye=ke[1],je=Object(n.useState)(""),we=Object(m.a)(je,2),Ce=we[0],Ne=we[1],Se=Object(n.useState)(""),Me=Object(m.a)(Se,2),Ie=Me[0],Be=Me[1],xe=Object(n.useState)(""),Ue=Object(m.a)(xe,2),Te=Ue[0],Pe=Ue[1],De=Object(n.useState)({}),Ae=Object(m.a)(De,2),Le=Ae[0],Re=Ae[1];Object(n.useEffect)((function(){O.a.get("".concat("https://echarger-backend.herokuapp.com","/v1/stations/getAllStations")).then((function(e){ge(e.data.rows),de(e.data.rows)})).catch((function(e){console.error(e)}))}),[]),Object(n.useEffect)((function(){O.a.get("".concat("https://echarger-backend.herokuapp.com","/v1/stations/getAllStations")).then((function(e){ge(e.data.rows),de(e.data.rows)})).catch((function(e){console.error(e)}))}),[o]),Object(n.useEffect)((function(){if(Ie&&_e){var e=setInterval((function(){qe()}),5e3);return function(){return clearInterval(e)}}}),[Ie]);var ze=function(){Xe(),T(!1),L(""),G(""),Ne(""),K(""),M("")},Ge=function(e,a){O.a.post("".concat("https://echarger-backend.herokuapp.com","/v1/users/login"),{},{auth:{username:e,password:a}}).then(function(){var n=Object(u.a)(l.a.mark((function n(r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:T(!0),L(e),G(a),K(r.data.token),t.getUserHistory();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){M("Incorrect username or password")}))},He=function(e,t,a){O.a.post("".concat("https://echarger-backend.herokuapp.com","/v1/users/register"),{username:e,email:t,password:a}).then((function(e){M("Succesfully created")})).catch((function(e){console.log(e)}))},Fe=function(){return M("")},We=function(e){de(me.filter((function(t){return t.stationName.toLowerCase().indexOf(e.toLowerCase())>=0}))),ee({})},Ye=function(e){ee(e),re({lat:e.lat,lng:e.lng}),ie(16)},Je=function(){ee({})},qe=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.a.put("".concat("https://echarger-backend.herokuapp.com","/v1/stations/chargingProcess/").concat(Ie),{},{headers:{Authorization:"Bearer ".concat(X)}}).then((function(e){Re(I({},e.data.rows[0]))})).catch(),e.next=3,Ve();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://echarger-backend.herokuapp.com","/v1/users/history/userHistory"),{headers:{Authorization:"Bearer ".concat(X)}}).then((function(e){v(e.data.rows)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye(!1),!Ie){e.next=4;break}return e.next=4,O.a.put("".concat("https://echarger-backend.herokuapp.com","/v1/stations/stopCharging/").concat(Ie),{},{headers:{Authorization:"Bearer ".concat(X)}}).then(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!o);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:Be(0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===t&&(t=0),e.next=3,O.a.post("".concat("https://echarger-backend.herokuapp.com","/v1/stations/startCharging/").concat(t),{},{headers:{Authorization:"Bearer ".concat(X)}}).then(function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1!==a.data?(ye(!0),Ne(t),J(1),Be(a.data.rows[0].id),Pe(""),Re({cost:0,timeOfUsage:0,energy:0}),s(!o)):Pe("No charger with such ID or it's taken already");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:E.a.generalGrid},r.a.createElement("main",null,r.a.createElement(g.a,null,r.a.createElement(p.a,{path:"/station/:id",exact:!0,render:function(e){return r.a.createElement(k,Object.assign({},e,{getInfoAboutStation:t.getInfoAboutStation}))}}),r.a.createElement(p.a,{path:"/login",exact:!0,render:function(e){return r.a.createElement(w,Object.assign({login:Ge},e,{username:A,message:N,setMessageToNull:Fe}))}}),r.a.createElement(p.a,{path:"/profile",exact:!0,render:function(e){return r.a.createElement(S,Object.assign({userHistory:d},e))}}),r.a.createElement(p.a,{path:"/registration",exact:!0,render:function(e){return r.a.createElement(C,Object.assign({},e,{register:He,message:N,setMessageToNull:Fe}))}}),r.a.createElement(p.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(j,{logout:ze,message:N,currentMarker:$,isLoggedIn:U,onSearchFilterUpdate:We,showSearchResults:ve,resultArray:fe.slice(0,7),setStation:Ye,setCurrentStationToNull:Je,startCharging:Ke,noChargerNotification:Te,isCharging:_e,UUID:Ce,idCharging:Ie,currentCharge:Le,stopCharging:Xe})}}))),r.a.createElement("div",{className:E.a.map},r.a.createElement(f.a,{center:ne,bootstrapURLKeys:{key:"AIzaSyBQc4fDzvIrxXU2Md73EjyY6oXWspFCMSY"},zoom:se,onChildClick:function(e,t){var a;me.forEach((function(e){e.stationName===t.text&&(a=e)})),re({lat:t.lat,lng:t.lng}),ie(16),ee(a)}},me.map((function(e,t){return r.a.createElement(b,{key:t,lat:e.lat,lng:e.lng,isTaken:e.isTaken,type:e.type,text:e.stationName})})))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.362feb44.chunk.js.map